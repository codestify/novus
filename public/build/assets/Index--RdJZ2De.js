import{j as e,e as he,f as _,E as xe,G as E}from"./ui-vqqFfSzO.js";import{aD as fe,K as ve,k as F,X as je,F as pe,aE as ge,a as x,aF as Ne,x as be,ar as W,j as X,ap as J,$ as we,e as Se,aG as ye,S as Ce,P as Ae,o as w}from"./vendor-BFGeaHkk.js";import{C as ke,u as Pe,A as De}from"./card-CoM3tDin.js";import{B as g,c as A,b as Ee}from"./button-BjyeRwdB.js";import{I as Le}from"./input-BktS8ObH.js";import{S as M,a as V,b as q,c as H,d as N}from"./select-ChQGh1Eh.js";import{B as y}from"./badge-DRtbR8hh.js";import{T as _e,a as Re,b as k,c as S,d as Te,e as b}from"./table-C9QjicNN.js";import{C as L}from"./checkbox-o13_neWM.js";import{u as R}from"./app-JU9k0MG1.js";import{A as Ie,a as ze,b as Ge,c as $e,d as Be,e as Fe,f as Me,g as Ve}from"./alert-dialog-BYAAv6KF.js";import{P as qe}from"./PaginationWrapper-DSqg5NLW.js";function He({posts:s,viewMode:r,setViewMode:t,selectedPosts:l,searchQuery:o,setSearchQuery:n,statusFilter:a,handleSearch:i,handleFilterChange:m,handleBulkAction:f,total:v}){const d=s.filter(c=>c.status==="published").length,u=s.filter(c=>c.status==="draft").length,p=s.filter(c=>c.status==="scheduled").length,j=s.filter(c=>c.status==="archived").length;return e.jsxs("div",{className:"p-4 mb-6 rounded-md border border-muted bg-card shadow-xs",children:[e.jsxs("div",{className:"flex flex-col gap-4 justify-between mb-4 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"overflow-x-auto flex-shrink-0 pb-2 sm:pb-0",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs(y,{variant:a==="all"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>m("all"),children:["All"," ",e.jsx("span",{className:"ml-1 font-semibold",children:v})]}),e.jsxs(y,{variant:a==="published"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>m("published"),children:["Published"," ",e.jsx("span",{className:"ml-1 font-semibold",children:d})]}),e.jsxs(y,{variant:a==="draft"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>m("draft"),children:["Drafts"," ",e.jsx("span",{className:"ml-1 font-semibold",children:u})]}),e.jsxs(y,{variant:a==="scheduled"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>m("scheduled"),children:["Scheduled"," ",e.jsx("span",{className:"ml-1 font-semibold",children:p})]}),j>0&&e.jsxs(y,{variant:a==="archived"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>m("archived"),children:["Archived"," ",e.jsx("span",{className:"ml-1 font-semibold",children:j})]})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex p-1 rounded-md bg-muted",children:[e.jsx(g,{variant:r==="list"?"secondary":"ghost",size:"sm",className:"p-0 w-8 h-8",onClick:()=>t("list"),"aria-label":"List view",title:"List view",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx(g,{variant:r==="grid"?"secondary":"ghost",size:"sm",className:"p-0 w-8 h-8",onClick:()=>t("grid"),"aria-label":"Grid view",title:"Grid view",children:e.jsx(ve,{className:"w-4 h-4"})})]})})]}),e.jsxs("form",{onSubmit:i,className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:pt-5",children:[e.jsxs("div",{className:"relative flex-1 max-w-lg flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(F,{className:"absolute left-3 top-1/2 w-4 h-4 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(Le,{placeholder:"Search posts...",value:o,onChange:c=>n(c.target.value),className:"pl-9 h-10 pr-10 focus-visible:ring-primary/30"}),o&&e.jsx(g,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>n(""),children:e.jsx(je,{className:"h-3.5 w-3.5"})})]}),e.jsxs(g,{type:"submit",size:"lg",className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(F,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Search"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("div",{className:"w-40 flex-shrink-0",children:e.jsxs(M,{value:a,onValueChange:m,children:[e.jsxs(V,{className:"h-10 bg-background",children:[e.jsx(pe,{className:"mr-2 w-4 h-4"}),e.jsx(q,{placeholder:"Filter by status"})]}),e.jsxs(H,{children:[e.jsx(N,{value:"all",children:"All Status"}),e.jsx(N,{value:"published",children:"Published"}),e.jsx(N,{value:"draft",children:"Draft"}),e.jsx(N,{value:"scheduled",children:"Scheduled"}),e.jsx(N,{value:"archived",children:"Archived"})]})]})}),l.length>0&&e.jsx("div",{className:"w-48 flex-shrink-0",children:e.jsxs(M,{onValueChange:f,children:[e.jsx(V,{className:"h-10 bg-background border-primary/20 text-primary",children:e.jsx(q,{placeholder:`${l.length} selected`})}),e.jsxs(H,{children:[e.jsx(N,{value:"publish",children:"Publish Selected"}),e.jsx(N,{value:"draft",children:"Move to Draft"}),e.jsx(N,{value:"feature",children:"Feature Posts"}),e.jsx(N,{value:"unfeature",children:"Unfeature Posts"}),e.jsx(N,{value:"delete",className:"text-destructive",children:"Delete Selected"})]})]})})]})]})]})}var P={exports:{}},D={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O;function Oe(){if(O)return D;O=1;var s=ge();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var t=typeof Object.is=="function"?Object.is:r,l=s.useState,o=s.useEffect,n=s.useLayoutEffect,a=s.useDebugValue;function i(d,u){var p=u(),j=l({inst:{value:p,getSnapshot:u}}),c=j[0].inst,C=j[1];return n(function(){c.value=p,c.getSnapshot=u,m(c)&&C({inst:c})},[d,p,u]),o(function(){return m(c)&&C({inst:c}),d(function(){m(c)&&C({inst:c})})},[d]),a(p),p}function m(d){var u=d.getSnapshot;d=d.value;try{var p=u();return!t(d,p)}catch{return!0}}function f(d,u){return u()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:i;return D.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:v,D}var U;function Ue(){return U||(U=1,P.exports=Oe()),P.exports}var Ke=Ue();function We(){return Ke.useSyncExternalStore(Xe,()=>!0,()=>!1)}function Xe(){return()=>{}}var T="Avatar",[Je,xs]=he(T),[Ye,Y]=Je(T),Z=x.forwardRef((s,r)=>{const{__scopeAvatar:t,...l}=s,[o,n]=x.useState("idle");return e.jsx(Ye,{scope:t,imageLoadingStatus:o,onImageLoadingStatusChange:n,children:e.jsx(_.span,{...l,ref:r})})});Z.displayName=T;var Q="AvatarImage",ee=x.forwardRef((s,r)=>{const{__scopeAvatar:t,src:l,onLoadingStatusChange:o=()=>{},...n}=s,a=Y(Q,t),i=Ze(l,n),m=xe(f=>{o(f),a.onImageLoadingStatusChange(f)});return E(()=>{i!=="idle"&&m(i)},[i,m]),i==="loaded"?e.jsx(_.img,{...n,ref:r,src:l}):null});ee.displayName=Q;var se="AvatarFallback",ae=x.forwardRef((s,r)=>{const{__scopeAvatar:t,delayMs:l,...o}=s,n=Y(se,t),[a,i]=x.useState(l===void 0);return x.useEffect(()=>{if(l!==void 0){const m=window.setTimeout(()=>i(!0),l);return()=>window.clearTimeout(m)}},[l]),a&&n.imageLoadingStatus!=="loaded"?e.jsx(_.span,{...o,ref:r}):null});ae.displayName=se;function K(s,r){return s?r?(s.src!==r&&(s.src=r),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ze(s,{referrerPolicy:r,crossOrigin:t}){const l=We(),o=x.useRef(null),n=l?(o.current||(o.current=new window.Image),o.current):null,[a,i]=x.useState(()=>K(n,s));return E(()=>{i(K(n,s))},[n,s]),E(()=>{const m=d=>()=>{i(d)};if(!n)return;const f=m("loaded"),v=m("error");return n.addEventListener("load",f),n.addEventListener("error",v),r&&(n.referrerPolicy=r),typeof t=="string"&&(n.crossOrigin=t),()=>{n.removeEventListener("load",f),n.removeEventListener("error",v)}},[n,t,r]),a}var te=Z,re=ee,le=ae;const I=x.forwardRef(({className:s,...r},t)=>e.jsx(te,{ref:t,className:A("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r}));I.displayName=te.displayName;const z=x.forwardRef(({className:s,...r},t)=>e.jsx(re,{ref:t,className:A("aspect-square h-full w-full",s),...r}));z.displayName=re.displayName;const G=x.forwardRef(({className:s,...r},t)=>e.jsx(le,{ref:t,className:A("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r}));G.displayName=le.displayName;function ne({status:s}){const r=()=>{switch(s=s.toLowerCase(),s){case"published":return{variant:"default",label:"Published"};case"draft":return{variant:"outline",label:"Draft"};case"scheduled":return{variant:"warning",label:"Scheduled"};case"trashed":return{variant:"destructive",label:"Trashed"};default:return{variant:"secondary",label:s}}},{variant:t,label:l}=r();return e.jsx(y,{variant:t,className:"capitalize",children:l})}function Qe({posts:s,selectedPosts:r,handleSelectAll:t,handleSelectPost:l,searchQuery:o,onDeletePost:n}){const a=R();return e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"overflow-hidden rounded-md border border-muted bg-card",children:e.jsx("div",{className:"px-4 py-2",children:e.jsxs(_e,{children:[e.jsx(Re,{children:e.jsxs(k,{children:[e.jsx(S,{className:"w-10",children:e.jsx(L,{checked:r.length===s.length&&s.length>0,onCheckedChange:t,"aria-label":"Select all posts"})}),e.jsx(S,{className:"min-w-[300px]",children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Title"})}),e.jsx(S,{className:"w-14 text-center",children:"Author"}),e.jsx(S,{className:"w-40 text-center",children:"Status"}),e.jsx(S,{className:"w-32 text-center",children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Date"})}),e.jsx(S,{className:"w-24 text-right",children:"Actions"})]})}),e.jsx(Te,{children:s.length>0?s.map(i=>e.jsxs(k,{className:"h-16",children:[e.jsx(b,{className:"align-middle",children:e.jsx(L,{checked:r.includes(i.id),onCheckedChange:()=>l(i.id),"aria-label":`Select post ${i.title}`})}),e.jsx(b,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex gap-2 items-center font-medium",children:[i.title,i.featured&&e.jsx("span",{className:"inline-flex justify-center items-center w-4 h-4 text-amber-600 bg-amber-100 rounded-full",title:"Featured",children:e.jsx(Ne,{className:"w-3 h-3 fill-current"})})]}),e.jsx("div",{className:"mt-1 max-w-md text-xs text-muted-foreground line-clamp-1",children:i.excerpt})]})}),e.jsx(b,{className:"text-center",children:e.jsxs(I,{className:"inline-flex w-8 h-8",children:[e.jsx(z,{src:i.author.avatar||"",alt:i.author.name}),e.jsx(G,{className:"text-xs",children:i.author.initials})]})}),e.jsx(b,{className:"w-40 text-center",children:e.jsx(ne,{status:i.status})}),e.jsx(b,{children:e.jsx("span",{className:"text-xs text-muted-foreground",children:i.created_at})}),e.jsx(b,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end items-center space-x-1",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"w-8 h-8",asChild:!0,children:e.jsx(be,{href:a("novus.posts.edit",{post:i.id}),target:"_blank",children:e.jsx(W,{className:"w-4 h-4"})})}),e.jsx(g,{variant:"ghost",size:"icon",className:"w-8 h-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>n(i),children:e.jsx(X,{className:"w-4 h-4"})})]})})]},i.id)):e.jsx(k,{children:e.jsx(b,{colSpan:7,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-muted-foreground",children:[e.jsx(J,{className:"mb-2 w-8 h-8"}),e.jsx("h3",{className:"text-lg font-medium",children:"No posts found"}),e.jsx("p",{className:"text-sm",children:o?"Try adjusting your search or filter to find what you're looking for.":"Get started by creating your first post."})]})})})})]})})})})}function es({posts:s,selectedPosts:r,handleSelectPost:t,searchQuery:l,onDeletePost:o}){const n=R();return e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 pb-10",children:s.length>0?s.map(a=>e.jsxs(ke,{className:"flex overflow-hidden flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 pb-2 border-b",children:[e.jsx(L,{checked:r.includes(a.id),onCheckedChange:()=>t(a.id),"aria-label":`Select post ${a.title}`}),e.jsx(ne,{status:a.status})]}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx("h3",{className:"mb-2 text-base font-medium line-clamp-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.excerpt})]}),e.jsx("div",{className:"px-4 pt-2 border-t",children:e.jsxs("div",{className:"flex items-center mb-3 text-sm text-muted-foreground",children:[e.jsxs(I,{className:"mr-2 w-6 h-6",children:[e.jsx(z,{src:a.author.avatar||"",alt:a.author.name}),e.jsx(G,{children:a.author.initials})]}),e.jsx("span",{children:a.author.name})]})}),e.jsxs("div",{className:"flex justify-between items-center p-4 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(we,{className:"mr-1 w-3 h-3"}),a.created_at]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"w-8 h-8",asChild:!0,children:e.jsx("a",{href:n("novus.posts.preview",a.id),target:"_blank",children:e.jsx(Se,{className:"w-4 h-4"})})}),e.jsx(g,{variant:"ghost",size:"icon",className:"w-8 h-8",asChild:!0,children:e.jsx("a",{href:n("novus.posts.edit",a.id),children:e.jsx(W,{className:"w-4 h-4"})})}),e.jsx(g,{variant:"ghost",size:"icon",className:"w-8 h-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>o(a),children:e.jsx(X,{className:"w-4 h-4"})})]})]})]},a.id)):e.jsx("div",{className:"col-span-full p-8 text-center rounded-lg border bg-card",children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-muted-foreground",children:[e.jsx(J,{className:"mb-2 w-8 h-8"}),e.jsx("h3",{className:"text-lg font-medium",children:"No posts found"}),e.jsx("p",{className:"text-sm",children:l?"Try adjusting your search or filter to find what you're looking for.":"Get started by creating your first post."}),!l&&e.jsx(g,{asChild:!0,className:"mt-4",children:e.jsxs("a",{href:n("novus.posts.create"),children:[e.jsx(ye,{className:"mr-2 w-4 h-4"}),"Create a new post"]})})]})})})}function ss({isOpen:s,onOpenChange:r,onConfirm:t,postTitle:l}){return e.jsx(Ie,{open:s,onOpenChange:r,children:e.jsxs(ze,{children:[e.jsxs(Ge,{children:[e.jsx($e,{children:"Delete Post"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx(Be,{asChild:!0,children:e.jsxs("span",{children:["Are you sure you want to delete"," ",l?e.jsxs("span",{className:"font-medium",children:['"',l,'"']}):"this post","?"]})}),e.jsx("p",{className:"mt-2",children:"This action cannot be undone. This will permanently delete the post and remove it from your database."})]})]}),e.jsxs(Fe,{children:[e.jsx(Me,{children:"Cancel"}),e.jsx(Ve,{onClick:t,className:A(Ee({variant:"destructive"}),"mt-2 sm:mt-0"),children:"Delete"})]})]})})}function fs(){const[s,r]=x.useState("list"),[t,l]=x.useState([]),[o,n]=x.useState(""),[a,i]=x.useState("all"),[m,f]=x.useState(!1),[v,d]=x.useState(null),u=R(),p=Pe(),{data:j,meta:c}=p.props.posts,C=()=>{t.length===j.length?l([]):l(j.map(h=>h.id).filter(h=>h!==null))},$=h=>{t.includes(h)?l(t.filter(me=>me!==h)):l([...t,h])},ie=h=>{w.post(u("novus.posts.bulk.action"),{action:h,post_ids:t},{onSuccess:()=>{l([]),w.reload({only:["posts"]})},preserveScroll:!0})},ce=h=>{h.preventDefault(),w.get(u("novus.posts.index"),{search:o||void 0,status:a!=="all"?a:void 0},{preserveState:!0})},oe=h=>{i(h),w.get(u("novus.posts.index"),{search:o||void 0,status:h!=="all"?h:void 0},{preserveState:!0})},de=h=>{w.get(u("novus.posts.index",{page:h}),{search:o||void 0,status:a!=="all"?a:void 0},{preserveState:!0})},B=h=>{d(h),f(!0)},ue=()=>{v&&w.delete(u("novus.posts.destroy",{post:v.id}),{onSuccess:()=>{f(!1),d(null)},preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{title:"Posts"}),e.jsx(De,{title:"All Posts",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-20 sm:px-6 py-8",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Posts"}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:"Manage your blog posts and articles"})]}),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsx(g,{asChild:!0,children:e.jsxs("a",{href:u("novus.posts.create"),children:[e.jsx(Ae,{className:"mr-2 w-4 h-4"}),"New Post"]})})})]}),e.jsx(He,{posts:j,viewMode:s,setViewMode:r,selectedPosts:t,searchQuery:o,setSearchQuery:n,statusFilter:a,handleSearch:ce,handleFilterChange:oe,handleBulkAction:ie,total:c.total}),s==="list"?e.jsx(Qe,{posts:j,selectedPosts:t,handleSelectAll:C,handleSelectPost:$,searchQuery:o,onDeletePost:B}):e.jsx(es,{posts:j,selectedPosts:t,handleSelectPost:$,searchQuery:o,onDeletePost:B}),c.last_page>1&&e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-t",children:[e.jsxs("div",{className:"mr-auto text-sm whitespace-nowrap text-muted-foreground",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:c.from})," ","to"," ",e.jsx("span",{className:"font-medium",children:c.to})," ","of"," ",e.jsx("span",{className:"font-medium",children:c.total})," ","posts"]}),e.jsx(qe,{currentPage:c.current_page,lastPage:c.last_page,links:c.links,onPageChange:de})]})]})}),e.jsx(ss,{isOpen:m,onOpenChange:f,onConfirm:ue,postTitle:v==null?void 0:v.title})]})}export{fs as default};
