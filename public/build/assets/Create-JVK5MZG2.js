import{j as e}from"./ui-vqqFfSzO.js";import{a as c,G as b,S as F}from"./vendor-BFGeaHkk.js";import{A as _}from"./card-CoM3tDin.js";import{u as w,a as k,g as T,b as y,P as I,c as B,d as H,E as L,e as M,F as O,f as R}from"./EnhancedPostSeo-Bu1XRpQ5.js";import{u as G}from"./app-JU9k0MG1.js";import{A as q,a as z,b as J,c as K,d as Q,g as U}from"./alert-dialog-BYAAv6KF.js";import"./button-BjyeRwdB.js";import"./input-BktS8ObH.js";import"./tabs-CjQQHpEZ.js";import"./dialog-DzDZ6qM5.js";import"./switch-KbbSyYSO.js";import"./select-ChQGh1Eh.js";import"./label-yJjOls6w.js";import"./format-SmSpYad1.js";import"./badge-DRtbR8hh.js";import"./alert-DAMaBpQx.js";import"./scroll-area-B4hJvv3Q.js";function ue(){const{distractionFree:m,animating:v,toggleDistraction:u}=w(),{saveStatus:n,errorMessage:f,showErrorDialog:D,setShowErrorDialog:C,startSaving:a,handleSuccess:l}=k(),p=c.useCallback(()=>{a(),setTimeout(()=>l(),100)},[a,l]),[d,P]=c.useState(""),[V,E]=c.useState(!1),g=G(),{data:t,setData:r,post:x,processing:h,errors:o,setError:j}=b(T()),A=c.useCallback(i=>{P(i),r("content",i),n==="saved"&&a(),o.content&&j("content","")},[n,a,o.content,r,j]),S=c.useCallback(i=>{i.preventDefault(),a();const N={...t,content:d,featured_image:t.featured_image&&typeof t.featured_image=="object"&&!(t.featured_image instanceof File)?t.featured_image.id:t.featured_image};x(g("novus.posts.store"),{data:N,preserveScroll:!0,onSuccess:()=>{E(!0),l()},onError:()=>{p()},preserveState:!0})},[t,d,x,g,l,a,p]),s=y(m,v);return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Create Post"}),e.jsx(_,{title:"Create New Post",children:e.jsxs("div",{className:s.container,children:[e.jsx(I,{title:t.title||"New Post",onToggleDistraction:u,onSave:S,saveStatus:n,processing:h,post_action:"create",className:s.header}),e.jsx("div",{className:s.editorContainer,children:e.jsxs("div",{className:s.contentLayout,children:[e.jsxs("div",{className:s.editor,children:[e.jsx("div",{className:s.editorInner,children:e.jsx(B,{data:t,setData:r,errors:o,content:d,onContentChange:A})}),e.jsx("div",{className:s.extraSections,children:e.jsx(H,{excerpt:t.excerpt,onChange:i=>r("excerpt",i),error:o.excerpt})}),e.jsx("div",{className:s.extraSections,children:e.jsx(L,{data:t,setData:r,errors:o,showPreview:!0})})]}),e.jsx("div",{className:s.sidebar,children:e.jsx(M,{data:t,setData:r,errors:o,postStatus:t.status})})]})}),e.jsx(O,{visible:m,onToggleDistraction:u,onSave:S,saveStatus:n,processing:h}),e.jsx(R,{saveStatus:n})]})}),e.jsx(q,{open:D,onOpenChange:C,children:e.jsxs(z,{children:[e.jsxs(J,{children:[e.jsx(K,{children:"Error"}),e.jsx(Q,{children:f})]}),e.jsx(U,{children:"Ok"})]})})]})}export{ue as default};
