import{j as e}from"./ui-DywWsleq.js";import{a as c,u as b,H as F}from"./vendor-CCldwOiF.js";import{A as _}from"./card-CyNjp41N.js";import{u as w,a as k,g as H,b as T,P as y,c as I,d as B,E as L,e as M,F as O,f as R}from"./EnhancedPostSeo-D6nws6wu.js";import{u as q}from"./app-DFHRDTLu.js";import{A as z,a as G,b as J,c as K,d as Q,g as U}from"./alert-dialog-w63fQX2N.js";import"./button-C6AKqhi5.js";import"./input-BfRz3b0e.js";import"./tabs-B18eDstI.js";import"./dialog-B154jy-8.js";import"./switch-Ba-RiRGh.js";import"./select-C2zIUc7v.js";import"./label-Ccdgylv7.js";import"./format-SmSpYad1.js";import"./badge-CwenDemp.js";import"./alert-B8VTkWTU.js";import"./scroll-area-D50mUn9N.js";function ue(){const{distractionFree:m,animating:S,toggleDistraction:u}=w(),{saveStatus:n,errorMessage:f,showErrorDialog:D,setShowErrorDialog:C,startSaving:a,handleSuccess:l}=k(),p=c.useCallback(()=>{a(),setTimeout(()=>l(),100)},[a,l]),[d,P]=c.useState(""),[V,E]=c.useState(!1),g=q(),{data:t,setData:r,post:x,processing:h,errors:o,setError:j}=b(H()),A=c.useCallback(i=>{P(i),r("content",i),n==="saved"&&a(),o.content&&j("content","")},[n,a,o.content,r,j]),v=c.useCallback(i=>{i.preventDefault(),a();const N={...t,content:d,featured_image:t.featured_image&&typeof t.featured_image=="object"&&"id"in t.featured_image?t.featured_image.id:t.featured_image};x(g("novus.posts.store"),{data:N,preserveScroll:!0,onSuccess:()=>{E(!0),l()},onError:()=>{p()},preserveState:!0})},[t,d,x,g,l,a,p]),s=T(m,S);return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Create Post"}),e.jsx(_,{title:"Create New Post",children:e.jsxs("div",{className:s.container,children:[e.jsx(y,{title:t.title||"New Post",onToggleDistraction:u,onSave:v,saveStatus:n,processing:h,post_action:"create",className:s.header}),e.jsx("div",{className:s.editorContainer,children:e.jsxs("div",{className:s.contentLayout,children:[e.jsxs("div",{className:s.editor,children:[e.jsx("div",{className:s.editorInner,children:e.jsx(I,{data:t,setData:r,errors:o,content:d,onContentChange:A})}),e.jsx("div",{className:s.extraSections,children:e.jsx(B,{excerpt:t.excerpt,onChange:i=>r("excerpt",i),error:o.excerpt})}),e.jsx("div",{className:s.extraSections,children:e.jsx(L,{data:t,setData:r,errors:o,showPreview:!0})})]}),e.jsx("div",{className:s.sidebar,children:e.jsx(M,{data:t,setData:r,errors:o,postStatus:t.status})})]})}),e.jsx(O,{visible:m,onToggleDistraction:u,onSave:v,saveStatus:n,processing:h}),e.jsx(R,{saveStatus:n})]})}),e.jsx(z,{open:D,onOpenChange:C,children:e.jsxs(G,{children:[e.jsxs(J,{children:[e.jsx(K,{children:"Error"}),e.jsx(Q,{children:f})]}),e.jsx(U,{children:"Ok"})]})})]})}export{ue as default};
