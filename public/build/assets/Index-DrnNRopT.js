import{j as e,e as he,f as T,E as xe,G as E}from"./ui-CVt06LZZ.js";import{aD as fe,K as pe,k as z,X as je,F as ve,aE as ge,a as h,aF as Ne,x as be,ar as Se,j as we,ap as X,$ as ye,aG as Ce,S as Ae,P as M,o as b,ax as ke}from"./vendor-CtvTbFOk.js";import{C as Pe,A as De}from"./card-DIGxw4ou.js";import{u as J,B as N,c as A,b as Ee}from"./Logo-tjbegkVE.js";import{I as Le}from"./input-B88NHI_x.js";import{S as V,a as q,b as H,c as O,d as g}from"./select--CHltVj9.js";import{B as y}from"./badge-Bj-uW_E8.js";import{T as Te,a as _e,b as k,c as w,d as Re,e as S}from"./table-DhpwhDzO.js";import{C as L}from"./checkbox-CjwW5nBO.js";import{u as _}from"./app-D1ztBGq2.js";import{A as Ie,a as Ge,b as Fe,c as $e,d as Be,e as ze,f as Me,g as Ve}from"./alert-dialog-DPaA5RDK.js";import{P as qe}from"./PaginationWrapper-DBLNxoyD.js";import{E as He}from"./EmptyState-C4V2uPQ1.js";function Oe({viewMode:s,setViewMode:r,selectedPosts:a,searchQuery:n,setSearchQuery:i,statusFilter:t,handleSearch:m,handleFilterChange:l,handleBulkAction:x,total:f}){const{post_counts:p}=J().props,{published:o,drafts:c,scheduled:v,archived:j}=p;return e.jsxs("div",{className:"p-4 mb-6 rounded-md border border-muted bg-card shadow-xs",children:[e.jsxs("div",{className:"flex flex-col gap-4 justify-between mb-4 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"overflow-x-auto flex-shrink-0 pb-2 sm:pb-0",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs(y,{variant:t==="all"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>l("all"),children:["All"," ",e.jsx("span",{className:"ml-1 font-semibold",children:f})]}),e.jsxs(y,{variant:t==="published"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>l("published"),children:["Published"," ",e.jsx("span",{className:"ml-1 font-semibold",children:o})]}),e.jsxs(y,{variant:t==="draft"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>l("draft"),children:["Drafts"," ",e.jsx("span",{className:"ml-1 font-semibold",children:c})]}),e.jsxs(y,{variant:t==="scheduled"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>l("scheduled"),children:["Scheduled"," ",e.jsx("span",{className:"ml-1 font-semibold",children:v})]}),j>0&&e.jsxs(y,{variant:t==="archived"?"default":"outline",className:"cursor-pointer hover:bg-primary/90 hover:text-muted transition-colors",onClick:()=>l("archived"),children:["Archived"," ",e.jsx("span",{className:"ml-1 font-semibold",children:j})]})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex p-1 rounded-md bg-muted",children:[e.jsx(N,{variant:s==="list"?"secondary":"ghost",size:"sm",className:"p-0 w-8 h-8",onClick:()=>r("list"),"aria-label":"List view",title:"List view",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx(N,{variant:s==="grid"?"secondary":"ghost",size:"sm",className:"p-0 w-8 h-8",onClick:()=>r("grid"),"aria-label":"Grid view",title:"Grid view",children:e.jsx(pe,{className:"w-4 h-4"})})]})})]}),e.jsxs("form",{onSubmit:m,className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:pt-5",children:[e.jsxs("div",{className:"relative flex-1 max-w-lg flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 w-4 h-4 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(Le,{placeholder:"Search posts...",value:n,onChange:d=>i(d.target.value),className:"pl-9 h-10 pr-10 focus-visible:ring-primary/30"}),n&&e.jsx(N,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>i(""),children:e.jsx(je,{className:"h-3.5 w-3.5"})})]}),e.jsxs(N,{type:"submit",size:"lg",className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(z,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Search"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("div",{className:"w-40 flex-shrink-0",children:e.jsxs(V,{value:t,onValueChange:l,children:[e.jsxs(q,{className:"h-10 bg-background",children:[e.jsx(ve,{className:"mr-2 w-4 h-4"}),e.jsx(H,{placeholder:"Filter by status"})]}),e.jsxs(O,{children:[e.jsx(g,{value:"all",children:"All Status"}),e.jsx(g,{value:"published",children:"Published"}),e.jsx(g,{value:"draft",children:"Draft"}),e.jsx(g,{value:"scheduled",children:"Scheduled"}),e.jsx(g,{value:"archived",children:"Archived"})]})]})}),a.length>0&&e.jsx("div",{className:"w-48 flex-shrink-0",children:e.jsxs(V,{onValueChange:x,children:[e.jsx(q,{className:"h-10 bg-background border-primary/20 text-primary",children:e.jsx(H,{placeholder:`${a.length} selected`})}),e.jsxs(O,{children:[e.jsx(g,{value:"publish",children:"Publish Selected"}),e.jsx(g,{value:"draft",children:"Move to Draft"}),e.jsx(g,{value:"feature",children:"Feature Posts"}),e.jsx(g,{value:"unfeature",children:"Unfeature Posts"}),e.jsx(g,{value:"delete",className:"text-destructive",children:"Delete Selected"})]})]})})]})]})]})}var P={exports:{}},D={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U;function Ue(){if(U)return D;U=1;var s=ge();function r(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var a=typeof Object.is=="function"?Object.is:r,n=s.useState,i=s.useEffect,t=s.useLayoutEffect,m=s.useDebugValue;function l(o,c){var v=c(),j=n({inst:{value:v,getSnapshot:c}}),d=j[0].inst,C=j[1];return t(function(){d.value=v,d.getSnapshot=c,x(d)&&C({inst:d})},[o,v,c]),i(function(){return x(d)&&C({inst:d}),o(function(){x(d)&&C({inst:d})})},[o]),m(v),v}function x(o){var c=o.getSnapshot;o=o.value;try{var v=c();return!a(o,v)}catch{return!0}}function f(o,c){return c()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return D.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:p,D}var K;function Ke(){return K||(K=1,P.exports=Ue()),P.exports}var We=Ke();function Xe(){return We.useSyncExternalStore(Je,()=>!0,()=>!1)}function Je(){return()=>{}}var R="Avatar",[Ye,ps]=he(R),[Ze,Y]=Ye(R),Z=h.forwardRef((s,r)=>{const{__scopeAvatar:a,...n}=s,[i,t]=h.useState("idle");return e.jsx(Ze,{scope:a,imageLoadingStatus:i,onImageLoadingStatusChange:t,children:e.jsx(T.span,{...n,ref:r})})});Z.displayName=R;var Q="AvatarImage",ee=h.forwardRef((s,r)=>{const{__scopeAvatar:a,src:n,onLoadingStatusChange:i=()=>{},...t}=s,m=Y(Q,a),l=Qe(n,t),x=xe(f=>{i(f),m.onImageLoadingStatusChange(f)});return E(()=>{l!=="idle"&&x(l)},[l,x]),l==="loaded"?e.jsx(T.img,{...t,ref:r,src:n}):null});ee.displayName=Q;var se="AvatarFallback",te=h.forwardRef((s,r)=>{const{__scopeAvatar:a,delayMs:n,...i}=s,t=Y(se,a),[m,l]=h.useState(n===void 0);return h.useEffect(()=>{if(n!==void 0){const x=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(x)}},[n]),m&&t.imageLoadingStatus!=="loaded"?e.jsx(T.span,{...i,ref:r}):null});te.displayName=se;function W(s,r){return s?r?(s.src!==r&&(s.src=r),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Qe(s,{referrerPolicy:r,crossOrigin:a}){const n=Xe(),i=h.useRef(null),t=n?(i.current||(i.current=new window.Image),i.current):null,[m,l]=h.useState(()=>W(t,s));return E(()=>{l(W(t,s))},[t,s]),E(()=>{const x=o=>()=>{l(o)};if(!t)return;const f=x("loaded"),p=x("error");return t.addEventListener("load",f),t.addEventListener("error",p),r&&(t.referrerPolicy=r),typeof a=="string"&&(t.crossOrigin=a),()=>{t.removeEventListener("load",f),t.removeEventListener("error",p)}},[t,a,r]),m}var ae=Z,re=ee,le=te;const I=h.forwardRef(({className:s,...r},a)=>e.jsx(ae,{ref:a,className:A("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r}));I.displayName=ae.displayName;const G=h.forwardRef(({className:s,...r},a)=>e.jsx(re,{ref:a,className:A("aspect-square h-full w-full",s),...r}));G.displayName=re.displayName;const F=h.forwardRef(({className:s,...r},a)=>e.jsx(le,{ref:a,className:A("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r}));F.displayName=le.displayName;function ne({status:s}){const r=()=>{switch(s=s.toLowerCase(),s){case"published":return{variant:"default",label:"Published"};case"draft":return{variant:"outline",label:"Draft"};case"scheduled":return{variant:"warning",label:"Scheduled"};case"trashed":return{variant:"destructive",label:"Trashed"};default:return{variant:"secondary",label:s}}},{variant:a,label:n}=r();return e.jsx(y,{variant:a,className:"capitalize",children:n})}function es({posts:s,selectedPosts:r,handleSelectAll:a,handleSelectPost:n,searchQuery:i,onDeletePost:t}){const m=_();return e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"overflow-hidden rounded-md border border-muted bg-card",children:e.jsx("div",{className:"px-4 py-2",children:e.jsxs(Te,{children:[e.jsx(_e,{children:e.jsxs(k,{children:[e.jsx(w,{className:"w-10",children:e.jsx(L,{checked:r.length===s.length&&s.length>0,onCheckedChange:a,"aria-label":"Select all posts"})}),e.jsx(w,{className:"min-w-[300px]",children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Title"})}),e.jsx(w,{className:"w-14 text-center",children:"Author"}),e.jsx(w,{className:"w-40 text-center",children:"Status"}),e.jsx(w,{className:"w-32 text-center",children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Date"})}),e.jsx(w,{className:"w-24 text-right",children:"Actions"})]})}),e.jsx(Re,{children:s.length>0?s.map(l=>e.jsxs(k,{className:"h-16",children:[e.jsx(S,{className:"align-middle",children:e.jsx(L,{checked:r.includes(l.id),onCheckedChange:()=>n(l.id),"aria-label":`Select post ${l.title}`})}),e.jsx(S,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex gap-2 items-center font-medium",children:[l.title,l.featured&&e.jsx("span",{className:"inline-flex justify-center items-center w-4 h-4 text-amber-600 bg-amber-100 rounded-full",title:"Featured",children:e.jsx(Ne,{className:"w-3 h-3 fill-current"})})]}),e.jsx("div",{className:"mt-1 max-w-md text-xs text-muted-foreground line-clamp-1",children:l.excerpt})]})}),e.jsx(S,{className:"text-center",children:e.jsxs(I,{className:"inline-flex w-8 h-8",children:[e.jsx(G,{src:l.author.avatar||"",alt:l.author.name}),e.jsx(F,{className:"text-xs",children:l.author.initials})]})}),e.jsx(S,{className:"w-40 text-center",children:e.jsx(ne,{status:l.status})}),e.jsx(S,{children:e.jsx("span",{className:"text-xs text-muted-foreground",children:l.created_at})}),e.jsx(S,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end items-center space-x-1",children:[e.jsx(N,{variant:"ghost",size:"icon",className:"w-8 h-8",asChild:!0,children:e.jsx(be,{href:m("novus.posts.edit",{post:l.id}),target:"_blank",children:e.jsx(Se,{className:"w-4 h-4"})})}),e.jsx(N,{variant:"ghost",size:"icon",className:"w-8 h-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>t(l),children:e.jsx(we,{className:"w-4 h-4"})})]})})]},l.id)):e.jsx(k,{children:e.jsx(S,{colSpan:7,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-muted-foreground",children:[e.jsx(X,{className:"mb-2 w-8 h-8"}),e.jsx("h3",{className:"text-lg font-medium",children:"No posts found"}),e.jsx("p",{className:"text-sm",children:i?"Try adjusting your search or filter to find what you're looking for.":"Get started by creating your first post."})]})})})})]})})})})}function ss({posts:s,selectedPosts:r,handleSelectPost:a,searchQuery:n}){const i=_();return e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 pb-10",children:s.length>0?s.map(t=>e.jsxs(Pe,{className:"flex overflow-hidden flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 pb-2 border-b",children:[e.jsx(L,{checked:r.includes(t.id),onCheckedChange:()=>a(t.id),"aria-label":`Select post ${t.title}`}),e.jsx(ne,{status:t.status})]}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsx("h3",{className:"mb-2 text-base font-medium line-clamp-2",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.excerpt})]}),e.jsx("div",{className:"px-4 pt-2 border-t",children:e.jsxs("div",{className:"flex items-center mb-3 text-sm text-muted-foreground",children:[e.jsxs(I,{className:"mr-2 w-6 h-6",children:[e.jsx(G,{src:t.author.avatar||"",alt:t.author.name}),e.jsx(F,{children:t.author.initials})]}),e.jsx("span",{children:t.author.name})]})}),e.jsx("div",{className:"flex justify-between items-center p-4 pt-2 border-t",children:e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ye,{className:"mr-1 w-3 h-3"}),t.created_at]})})]},t.id)):e.jsx("div",{className:"col-span-full p-8 text-center rounded-lg border bg-card",children:e.jsxs("div",{className:"flex flex-col justify-center items-center text-muted-foreground",children:[e.jsx(X,{className:"mb-2 w-8 h-8"}),e.jsx("h3",{className:"text-lg font-medium",children:"No posts found"}),e.jsx("p",{className:"text-sm",children:n?"Try adjusting your search or filter to find what you're looking for.":"Get started by creating your first post."}),!n&&e.jsx(N,{asChild:!0,className:"mt-4",children:e.jsxs("a",{href:i("novus.posts.create"),children:[e.jsx(Ce,{className:"mr-2 w-4 h-4"}),"Create a new post"]})})]})})})}function ts({isOpen:s,onOpenChange:r,onConfirm:a,postTitle:n}){return e.jsx(Ie,{open:s,onOpenChange:r,children:e.jsxs(Ge,{children:[e.jsxs(Fe,{children:[e.jsx($e,{children:"Delete Post"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx(Be,{asChild:!0,children:e.jsxs("span",{children:["Are you sure you want to delete"," ",n?e.jsxs("span",{className:"font-medium",children:['"',n,'"']}):"this post","?"]})}),e.jsx("p",{className:"mt-2",children:"This action cannot be undone. This will permanently delete the post and remove it from your database."})]})]}),e.jsxs(ze,{children:[e.jsx(Me,{children:"Cancel"}),e.jsx(Ve,{onClick:a,className:A(Ee({variant:"destructive"}),"mt-2 sm:mt-0"),children:"Delete"})]})]})})}function js(){const[s,r]=h.useState("list"),[a,n]=h.useState([]),[i,t]=h.useState(""),[m,l]=h.useState("all"),[x,f]=h.useState(!1),[p,o]=h.useState(null),c=_(),v=J(),{data:j,meta:d}=v.props.posts,C=()=>{a.length===j.length?n([]):n(j.map(u=>u.id).filter(u=>u!==null))},$=u=>{a.includes(u)?n(a.filter(me=>me!==u)):n([...a,u])},ie=u=>{b.post(c("novus.posts.bulk.action"),{action:u,post_ids:a},{onSuccess:()=>{n([]),b.reload({only:["posts"]})},preserveScroll:!0})},ce=u=>{u.preventDefault(),b.get(c("novus.posts.index"),{search:i||void 0,status:m!=="all"?m:void 0},{preserveState:!0})},oe=u=>{l(u),b.get(c("novus.posts.index"),{search:i||void 0,status:u!=="all"?u:void 0},{preserveState:!0})},de=u=>{b.get(c("novus.posts.index",{page:u}),{search:i||void 0,status:m!=="all"?m:void 0},{preserveState:!0})},B=u=>{o(u),f(!0)},ue=()=>{p&&b.delete(c("novus.posts.destroy",{post:p.id}),{onSuccess:()=>{f(!1),o(null)},preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{title:"Posts"}),e.jsx(De,{title:"All Posts",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-20 sm:px-6 py-8",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Posts"}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:"Manage your blog posts and articles"})]}),e.jsx("div",{className:"flex gap-3 items-center",children:e.jsx(N,{asChild:!0,children:e.jsxs("a",{href:c("novus.posts.create"),children:[e.jsx(M,{className:"mr-2 w-4 h-4"}),"New Post"]})})})]}),e.jsx(Oe,{viewMode:s,setViewMode:r,selectedPosts:a,searchQuery:i,setSearchQuery:t,statusFilter:m,handleSearch:ce,handleFilterChange:oe,handleBulkAction:ie,total:d.total}),j.length===0?e.jsx(He,{icon:e.jsx(ke,{className:"w-10 h-10"}),title:"No posts found",description:i?"No posts match your search criteria. Try different keywords or filters.":"Get started by creating your first post.",action:i?e.jsx(N,{variant:"outline",onClick:()=>{t("")},children:"Clear Filters"}):e.jsxs(N,{onClick:()=>b.visit(c("novus.posts.create")),children:[e.jsx(M,{className:"mr-2 w-4 h-4"}),"Create Post"]}),className:"py-16"}):s==="list"?e.jsx(es,{posts:j,selectedPosts:a,handleSelectAll:C,handleSelectPost:$,searchQuery:i,onDeletePost:B}):e.jsx(ss,{posts:j,selectedPosts:a,handleSelectPost:$,searchQuery:i,onDeletePost:B}),d.last_page>1&&e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-t",children:[e.jsxs("div",{className:"mr-auto text-sm whitespace-nowrap text-muted-foreground",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:d.from})," ","to"," ",e.jsx("span",{className:"font-medium",children:d.to})," ","of"," ",e.jsx("span",{className:"font-medium",children:d.total})," ","posts"]}),e.jsx(qe,{currentPage:d.current_page,lastPage:d.last_page,links:d.links,onPageChange:de})]})]})}),e.jsx(ts,{isOpen:x,onOpenChange:f,onConfirm:ue,postTitle:p==null?void 0:p.title})]})}export{js as default};
