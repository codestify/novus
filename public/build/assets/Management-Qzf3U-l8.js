import{j as e}from"./ui-vqqFfSzO.js";import{a as c,G as se,S as ae,aN as te,v as le,D as ne,q as ie,P as A,k as re,T as k,n as ce,j as de,o as D,av as z,ap as oe,as as xe,aO as me,f as he}from"./vendor-BFGeaHkk.js";import{u as ue}from"./app-JU9k0MG1.js";import{A as ge,D as je,h as pe,i as Ne,j as S,k as ve,C as fe,a as we,b as be,c as Ce,d as ye}from"./card-CoM3tDin.js";import{B as l,c as N}from"./button-BjyeRwdB.js";import{I as u}from"./input-BktS8ObH.js";import{L as v}from"./label-yJjOls6w.js";import{B as De}from"./badge-DRtbR8hh.js";import{D as _,a as P,d as M,b as F,e as L,c as U}from"./dialog-DzDZ6qM5.js";import{A as Se,a as Te,b as Ae,c as ke,d as ze,e as _e,f as Pe,g as Me}from"./alert-dialog-BYAAv6KF.js";import{T as Fe,a as Le,b as O,c as f,d as Ue,e as w}from"./table-C9QjicNN.js";import{E as Oe}from"./EmptyState-w3UCVyw-.js";function Ze({tags:i,errors:He,flash:r}){const o=ue(),[g,T]=c.useState(""),[H,x]=c.useState(!1),[R,j]=c.useState(!1),[t,m]=c.useState(null),[B,b]=c.useState(!1),[I,Re]=c.useState(i.per_page.toString()),{data:n,setData:d,post:q,patch:G,processing:p,reset:C,errors:a}=se({name:"",slug:""});c.useEffect(()=>{t?d({name:t.name,slug:t.slug}):C()},[t]),c.useEffect(()=>{if(!t&&n.name&&!n.slug){const s=n.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();d("slug",s)}},[n.name,t]);const Q=()=>{q(o("novus.tags.store"),{onSuccess:()=>{x(!1),C()}})},V=s=>{m(s),j(!0)},W=()=>{t&&G(o("novus.tags.update",t.id),{onSuccess:()=>{j(!1),m(null)}})},$=s=>{m(s),b(!0)},J=()=>{t&&D.delete(o("novus.tags.destroy",t.id),{onSuccess:()=>{b(!1),m(null)}})},y=s=>{D.get(o("novus.tags.index",{page:s}),{search:g,per_page:I},{preserveState:!0})},K=()=>{const{current_page:s,last_page:X,links:Y}=i,Z=Y.slice(1,-1);return e.jsxs("div",{className:"flex justify-center items-center space-x-1",children:[e.jsxs(l,{variant:"outline",size:"icon",className:"w-8 h-8",disabled:s===1,onClick:()=>y(s-1),children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"Previous page"})]}),Z.map((h,E)=>{if(h.label==="...")return e.jsxs(l,{variant:"outline",size:"icon",className:"w-8 h-8",disabled:!0,children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]},`ellipsis-${E}`);const ee=parseInt(h.label);return e.jsx(l,{variant:h.active?"default":"outline",size:"icon",className:"w-8 h-8",onClick:()=>y(ee),children:h.label},h.label)}),e.jsxs(l,{variant:"outline",size:"icon",className:"w-8 h-8",disabled:s===X,onClick:()=>y(s+1),children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"Next page"})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{title:"Tags Management"}),e.jsxs(ge,{children:[e.jsxs("div",{className:"container py-20 max-w-7xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tags"}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:"Manage tags to categorize and organize your content"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(je,{children:[e.jsx(pe,{asChild:!0,children:e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(te,{className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"Options"})]})}),e.jsxs(Ne,{align:"end",className:"w-56",children:[e.jsxs(S,{children:[e.jsx(le,{className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"Import Tags"})]}),e.jsxs(S,{children:[e.jsx(ne,{className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"Export Tags"})]}),e.jsx(ve,{}),e.jsxs(S,{children:[e.jsx(ie,{className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"View Documentation"})]})]})]}),e.jsxs(l,{onClick:()=>x(!0),children:[e.jsx(A,{className:"mr-2 w-4 h-4"}),"New Tag"]})]})]}),(r==null?void 0:r.success)&&e.jsx("div",{className:"p-4 mb-6 bg-green-50 rounded border-l-4 border-green-400 shadow",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-700",children:r.success})})})}),(r==null?void 0:r.error)&&e.jsx("div",{className:"p-4 mb-6 bg-red-50 rounded border-l-4 border-red-400 shadow",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:r.error})})})}),e.jsxs(fe,{className:"h-full rounded-md shadow-xs",children:[e.jsxs(we,{className:"pb-3",children:[e.jsx(be,{children:"All Tags"}),e.jsxs(Ce,{children:[i.total," total tags"]})]}),e.jsx("div",{className:"px-6 py-2 border-b",children:e.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(re,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"Search tags...",className:"pl-8 h-9",value:g,onChange:s=>T(s.target.value)})]}),e.jsx(l,{type:"submit",size:"sm",variant:"secondary",children:"Search"})]})}),e.jsx(ye,{className:"p-6",children:i.data.length>0?e.jsxs("div",{children:[e.jsxs(Fe,{children:[e.jsx(Le,{children:e.jsxs(O,{children:[e.jsx(f,{children:"Tag"}),e.jsx(f,{children:"Slug"}),e.jsx(f,{children:"Usage"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(Ue,{children:i.data.map(s=>e.jsxs(O,{className:"group",children:[e.jsx(w,{children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"flex justify-center items-center w-7 h-7 rounded-full bg-primary/10",children:e.jsx(k,{className:"w-3.5 h-3.5 text-primary"})}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx(w,{children:e.jsx("code",{className:"px-1.5 py-0.5 rounded bg-muted font-mono text-xs",children:s.slug})}),e.jsx(w,{children:e.jsxs(De,{variant:s.posts_count>0?"default":"outline",className:"text-xs",children:[s.posts_count," ",s.posts_count===1?"post":"posts"]})}),e.jsx(w,{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(l,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:()=>V(s),children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"icon",className:"w-8 h-8 text-destructive",onClick:()=>$(s),children:e.jsx(de,{className:"w-4 h-4"})})]})})]},s.id))})]}),e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:i.from})," ","to"," ",e.jsx("span",{className:"font-medium",children:i.to})," ","of"," ",e.jsx("span",{className:"font-medium",children:i.total})," ","tags"]}),K()]})]}):e.jsx(Oe,{icon:e.jsx(k,{className:"w-10 h-10"}),title:"No tags found",description:g?"No tags match your search criteria. Try different keywords.":"Get started by creating your first tag to categorize your content.",action:g?e.jsx(l,{variant:"outline",onClick:()=>{T(""),D.get(o("novus.tags.index"))},children:"Clear Search"}):e.jsxs(l,{onClick:()=>x(!0),children:[e.jsx(A,{className:"mr-2 w-4 h-4"}),"Create Tag"]}),className:"py-16"})})]})]}),e.jsx(_,{open:H,onOpenChange:x,children:e.jsxs(P,{className:"sm:max-w-md",children:[e.jsxs(M,{children:[e.jsx(F,{children:"Create New Tag"}),e.jsx(L,{children:"Add a new tag to help categorize and organize your content."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"tag-name",children:["Tag Name"," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(u,{id:"tag-name",value:n.name,onChange:s=>d("name",s.target.value),placeholder:"Enter tag name",className:N((a==null?void 0:a.name)&&"border-destructive")}),(a==null?void 0:a.name)&&e.jsx("p",{className:"text-xs text-destructive",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"tag-slug",children:"Slug"}),e.jsxs("div",{className:"flex relative items-center",children:[e.jsx("span",{className:"absolute left-2.5 text-muted-foreground",children:e.jsx(z,{className:"h-3.5 w-3.5"})}),e.jsx(u,{id:"tag-slug",value:n.slug,onChange:s=>d("slug",s.target.value),placeholder:"enter-slug",className:N("pl-8 font-mono text-sm",(a==null?void 0:a.slug)&&"border-destructive")})]}),(a==null?void 0:a.slug)&&e.jsx("p",{className:"text-xs text-destructive",children:a.slug}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Used in URLs, automatically generated from the name if left empty"})]})]}),e.jsxs(U,{children:[e.jsx(l,{variant:"outline",onClick:()=>{x(!1),C()},children:"Cancel"}),e.jsx(l,{onClick:Q,disabled:p,children:p?"Creating...":"Create Tag"})]})]})}),e.jsx(_,{open:R,onOpenChange:j,children:e.jsxs(P,{className:"sm:max-w-md",children:[e.jsxs(M,{children:[e.jsx(F,{children:"Edit Tag"}),e.jsx(L,{children:"Update this tag's name and slug."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"edit-tag-name",children:["Tag Name"," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(u,{id:"edit-tag-name",value:n.name,onChange:s=>d("name",s.target.value),className:N((a==null?void 0:a.name)&&"border-destructive")}),(a==null?void 0:a.name)&&e.jsx("p",{className:"text-xs text-destructive",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-tag-slug",children:"Slug"}),e.jsxs("div",{className:"flex relative items-center",children:[e.jsx("span",{className:"absolute left-2.5 text-muted-foreground",children:e.jsx(z,{className:"h-3.5 w-3.5"})}),e.jsx(u,{id:"edit-tag-slug",value:n.slug,onChange:s=>d("slug",s.target.value),className:N("pl-8 font-mono text-sm",(a==null?void 0:a.slug)&&"border-destructive")})]}),(a==null?void 0:a.slug)&&e.jsx("p",{className:"text-xs text-destructive",children:a.slug}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Used in URLs: /tag/",n.slug]})]}),t&&t.posts_count>0&&e.jsx("div",{className:"p-3 bg-amber-50 rounded-md border border-amber-200",children:e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx(oe,{className:"h-4 w-4 text-amber-600 mt-0.5"}),e.jsxs("p",{className:"text-sm text-amber-800",children:["This tag is used in"," ",t.posts_count," ",t.posts_count===1?"post":"posts",". Changes will affect all tagged content."]})]})})]}),e.jsxs(U,{children:[e.jsx(l,{variant:"outline",onClick:()=>{j(!1),m(null)},children:"Cancel"}),e.jsx(l,{onClick:W,disabled:p,children:p?"Saving...":"Save Changes"})]})]})})]}),e.jsx(Se,{open:B,onOpenChange:b,children:e.jsxs(Te,{children:[e.jsxs(Ae,{children:[e.jsx(ke,{children:"Delete Tag"}),e.jsxs(ze,{children:['Are you sure you want to delete the tag "',t==null?void 0:t.name,'"?',((t==null?void 0:t.posts_count)??0)>0&&e.jsxs("p",{className:"mt-2 font-medium text-destructive",children:["Warning: This tag is used in"," ",t==null?void 0:t.posts_count," ",(t==null?void 0:t.posts_count)===1?"post":"posts",". Deleting it will remove the tag from all posts."]})]})]}),e.jsxs(_e,{children:[e.jsx(Pe,{children:"Cancel"}),e.jsx(Me,{onClick:J,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{Ze as default};
