import{j as e}from"./ui-D7JatNZG.js";import{a as v,G as K,S as W,x as A,f as X,X as Z,h as E,T as $,i as q,j as J}from"./vendor-D6XoaljX.js";import{A as Q,C as m,a as h,b as x,c as L,d as u,T as Y,e as ee,f as se,g as ae,S as F}from"./card-BH9fkisz.js";import{u as te,B as g,c as d}from"./Logo-DrkNmNrq.js";import{I as p}from"./input-DYlAjlcc.js";import{A as re,a as ne,T as O}from"./alert-Chfxu1gK.js";import{L as i}from"./label--u-XTEpa.js";import{S as ie,a as le,b as oe,c as ce,d as R}from"./select-B5U9ZZT0.js";import{T as de,a as me,b as P,c as I}from"./tabs-BO7px9zp.js";import{A as he,a as xe,b as ue,c as ge,d as pe,e as je,f as fe,g as ve}from"./alert-dialog-CjR_UoLi.js";import{u as Ne}from"./app-uV5e9IYI.js";function Le(){var w,C,S,D,T;const[l,N]=v.useState(!1),[B,y]=v.useState(!1),j=Ne(),M=te(),{category:a,parent_categories:n}=M.props,{data:t,setData:r,patch:U,errors:b,delete:z,processing:f}=K({name:a.name,slug:a.slug,description:a.description||"",parent_id:a.parent_id,seo:{meta_title:((w=a.seo_meta)==null?void 0:w.meta_title)||"",meta_description:((C=a.seo_meta)==null?void 0:C.meta_description)||"",canonical_url:((S=a.seo_meta)==null?void 0:S.canonical_url)||"",meta_keywords:((D=a.seo_meta)==null?void 0:D.meta_keywords)||""}}),o=s=>{const k=b[s];return k?e.jsx("div",{className:"mt-[-4px] text-sm text-destructive",children:k}):null},c=s=>!!b[s];v.useEffect(()=>{(n==null?void 0:n.length)===0&&t.parent_id!==null?r("parent_id",null):a.parent_category&&t.parent_id!==a.parent_category.id&&r("parent_id",a.parent_category.id)},[n,a.parent_category]),v.useEffect(()=>{if(l&&t.name){const s=t.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();r("slug",s)}},[t.name,l]);const _=s=>{s.preventDefault(),U(j("novus.categories.update",a.id))},V=()=>{z(j("novus.categories.destroy",a.id))},H=new Date(a.created_at).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),G=new Date(a.updated_at).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:`Edit Category: ${a.name}`}),e.jsx(Q,{children:e.jsxs("div",{className:"py-20 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(A,{href:j("novus.categories.index"),className:"transition-colors hover:text-primary",children:"Categories"}),e.jsx(X,{className:"mx-1 w-4 h-4"}),e.jsx("span",{className:"truncate",children:a.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Category"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(g,{variant:"outline",asChild:!0,children:e.jsxs(A,{href:j("novus.categories.index"),children:[e.jsx(Z,{className:"mr-2 w-4 h-4"}),"Cancel"]})}),e.jsxs(g,{onClick:_,disabled:f,children:[e.jsx(E,{className:"mr-2 w-4 h-4"}),f?"Saving...":"Save Changes"]})]})]})]}),e.jsx("form",{onSubmit:_,children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(m,{className:"rounded-md shadow-xs",children:[e.jsxs(h,{children:[e.jsx(x,{children:"Category Information"}),e.jsx(L,{children:"Edit the basic information for this category"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"name",children:["Category Name"," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(p,{id:"name",value:t.name,onChange:s=>r("name",s.target.value),className:d("shadow-none h-9",c("name")&&"border-destructive")}),o("name")]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{htmlFor:"slug",children:"Slug"}),e.jsx(Y,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(g,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-1.5",onClick:()=>N(!l),children:[e.jsx($,{className:"h-3.5 w-3.5 mr-1"}),e.jsx("span",{className:"text-xs",children:l?"Auto":"Manual"})]})}),e.jsx(ae,{children:e.jsx("p",{children:"Toggle between automatic and manual slug generation"})})]})})]}),e.jsx(p,{id:"slug",value:t.slug,onChange:s=>{N(!1),r("slug",s.target.value)},className:d("font-mono text-sm shadow-none h-9",l&&"text-muted-foreground",c("slug")&&"border-destructive"),readOnly:l}),o("slug"),e.jsx(re,{className:"bg-muted border-muted-foreground/20",children:e.jsxs(ne,{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Warning:"})," ","Changing the slug may break existing links to this category."]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx(O,{id:"description",value:t.description||"",onChange:s=>r("description",s.target.value),className:"min-h-[120px] shadow-none"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Briefly describe what this category is about. This may be displayed on your site."})]})]})]}),e.jsxs(m,{className:"rounded-md shadow-xs",children:[e.jsxs(h,{children:[e.jsx(x,{children:"Search Engine Optimization"}),e.jsx(L,{children:"Customize how this category appears in search engines"})]}),e.jsx(u,{className:"space-y-4",children:e.jsxs(de,{defaultValue:"basic",className:"w-full",children:[e.jsxs(me,{className:"grid grid-cols-2 w-full",children:[e.jsx(P,{value:"basic",children:"Basic SEO"}),e.jsx(P,{value:"advanced",children:"Advanced"})]}),e.jsxs(I,{value:"basic",className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"meta_title",children:"Meta Title"}),e.jsx(p,{id:"meta_title",value:t.seo.meta_title||"",onChange:s=>r("seo",{...t.seo,meta_title:s.target.value}),className:d("h-9 font-mono text-sm shadow-none",c("seo.meta_title")&&"border-destructive")}),o("seo.meta_title"),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Defaults to category name if left blank"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"meta_description",children:"Meta Description"}),e.jsx(O,{id:"meta_description",value:t.seo.meta_description||"",onChange:s=>r("seo",{...t.seo,meta_description:s.target.value}),className:d("min-h-[80px] font-mono text-sm shadow-none",c("seo.meta_description")&&"border-destructive")}),o("seo.meta_description"),e.jsx("p",{className:"text-sm text-muted-foreground",children:"A brief description of this category for search engines (recommended: 150-160 characters)"})]})]}),e.jsxs(I,{value:"advanced",className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"canonical_url",children:"Canonical URL"}),e.jsx(p,{id:"canonical_url",value:t.seo.canonical_url||"",onChange:s=>r("seo",{...t.seo,canonical_url:s.target.value}),className:d("h-9 font-mono text-sm shadow-none",c("seo.canonical_url")&&"border-destructive")}),o("seo.canonical_url"),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The preferred URL for this category (leave blank to use the default URL)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"meta_keywords",children:"Meta Keywords"}),e.jsx(p,{id:"meta_keywords",value:t.seo.meta_keywords||"",onChange:s=>r("seo",{...t.seo,meta_keywords:s.target.value}),className:d("h-9 font-mono text-sm shadow-none",c("seo.meta_keywords")&&"border-destructive")}),o("seo.meta_keywords"),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comma-separated keywords (less important for modern SEO)"})]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{className:"rounded-md shadow-xs",children:[e.jsx(h,{children:e.jsx(x,{children:"Category Settings"})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"parent",children:"Parent Category"}),e.jsxs(ie,{value:((T=t.parent_id)==null?void 0:T.toString())||"none",onValueChange:s=>r("parent_id",s==="none"?null:parseInt(s,10)),children:[e.jsx(le,{className:"h-9",children:e.jsx(oe,{placeholder:"Select a parent category"})}),e.jsxs(ce,{children:[e.jsx(R,{value:"none",children:"None (Top Level)"}),n&&n.length>0?n.map(s=>s.id!==a.id&&e.jsx(R,{value:s.id.toString(),children:s.name},s.id)):e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No other categories available"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:!n||n.length===0?"No other categories available. This will be a top-level category.":"Categories can be nested to create a hierarchy"})]}),e.jsx(F,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Category URL Preview"}),e.jsx("div",{className:"p-3 rounded-md bg-muted",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"font-mono text-xs truncate text-muted-foreground",children:[window.location.origin,"/category/",t.parent_id?"parent-slug/":"",e.jsx("span",{className:"font-semibold text-foreground",children:t.slug})]}),e.jsx(q,{className:"flex-shrink-0 ml-1 w-3 h-3 text-muted-foreground"})]})})]})]})]}),e.jsxs(m,{className:"rounded-md shadow-xs",children:[e.jsx(h,{children:e.jsx(x,{children:"Publishing"})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Created:"," "]}),e.jsx("span",{className:"font-medium",children:H})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Last modified:"," "]}),e.jsx("span",{className:"font-medium",children:G})]})]}),e.jsx(F,{}),e.jsxs(g,{type:"submit",className:"w-full",disabled:f,children:[e.jsx(E,{className:"mr-2 w-4 h-4"}),f?"Saving...":"Save Changes"]})]})})]}),e.jsxs(m,{className:"rounded-md shadow-xs border-destructive/20",children:[e.jsx(h,{className:"pb-3",children:e.jsx(x,{className:"text-destructive",children:"Danger Zone"})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete this category and all of its data."}),e.jsxs(g,{type:"button",variant:"destructive",className:"w-full",onClick:s=>{s.preventDefault(),y(!0)},children:[e.jsx(J,{className:"mr-2 w-4 h-4"}),"Delete Category"]})]})})]})]})]})})]})}),e.jsx(he,{open:B,onOpenChange:y,children:e.jsxs(xe,{children:[e.jsxs(ue,{children:[e.jsx(ge,{children:"Are you sure?"}),e.jsxs(pe,{children:['This will permanently delete the "',a.name,'" category. This action cannot be undone.']})]}),e.jsxs(je,{children:[e.jsx(fe,{children:"Cancel"}),e.jsx(ve,{className:"text-white cursor-pointer bg-destructive hover:bg-destructive/90",onClick:s=>{s.preventDefault(),V()},children:"Delete"})]})]})})]})}export{Le as default};
